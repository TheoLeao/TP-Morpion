<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP - Morpion</title>
    <script src="js/script.js"></script>
    <style>
        .jeu {
            display: flex;
        }

        .jeu div {
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="consigne">
            <h4>Consigne: TP : Réalisation d'un jeu de morpion 5x5. Pour gagner il faudra aligner quatre carrés
                ou quatre ronds.</h4>
            <ul>
                <li> 1° Pour jouer, il faudra impérativement que les noms des deux joueurs soient saisis.</li>
                <li>
                    2° Les joueurs jouent alternativement. Le symbole <<<<< indique qui doit jouer. </li>
                <li>
                    3° Si un joueur aligne 4 ronds ou 4 carrés, un message Gagné apparait à côté de son
                    nom, son score augmente de 1, le jeu est bloqué et deux boutons apparaissent 'Rejouer" et "Nouvelle
                    partie".
                </li>

                <li>
                    4° En cliquant sur Rejouer les deux même joueurs peuvent refaire une partie (le jeu
                    précédent est effacé et les deux boutons sont masqués)
                </li>
                <li>
                    5° En cliquant sur Nouvelle partie les noms et les scores sont effacés. Les deux
                    boutons sont masqués.
                </li>
                <li>
                    6° Chaque fois qu'un score évolue, les noms et les scores sont enregistrés en
                    localStorage.
                </li>
                <li>
                    7° Au démarrage d'une partie dans une nouvelle fenêtre du navigateur, si deux noms
                    et deux scores sont enregistrés dans le localStorage, ils sont alors affichés avec les
                    deux boutons 'Rejouer" et "Nouvelle partie".
                </li>
                <li>
                    8° Lorsque 25 coups ont été joués sans réussir à aligner 4 ronds ou 4 carrés, le
                    message "Partie nulle" s'affiche, la partie est bloquée et deux boutons 'Rejouer" et
                    "Nouvelle partie" sont rendus visibles.
                </li>
            </ul>
        </div>
        <div class="jeu">
            <div>
                <canvas id="canvasJeu" width="500" height="500"></canvas>
            </div>
            <div class="infoJeu">
                <h2>Joueurs</h2>
                <div>
                    <input id="nomJoueur1" type="text" placeholder="Nom joueur 1">
                    <input id="nomJoueur2" type="text" placeholder="Nom joueur 2">
                </div>


                <button disabled>Rejouer</button>
                <button id="btnNouvellePartie">Nouvelle partie</button>
            </div>



        </div>
    </div>
</body>
<script src="js/script.js"></script>
<script>
    nomJoueur1 = document.querySelector('#nomJoueur1');
    nomJoueur2 = document.querySelector('#nomJoueur1');

    var canvas = document.querySelector('#canvasJeu');
    var width = canvas.width = 510;
    var height = canvas.height = 510;

    var ctx = canvas.getContext('2d');
    //Définition couleur de fond
    ctx.fillStyle = `rgb(248,241,241)`;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    function drawX(centerX, centerY, size) {
        ctx.beginPath(); // Début du chemin
        ctx.moveTo(centerX - size / 2, centerY - size / 2); // Le tracé part du point 50,50
        ctx.lineTo(centerX + size / 2, centerY + size / 2); // Un segment est ajouté vers 200,200
        ctx.moveTo(centerX + size / 2, centerY - size / 2); // Puis on saute jusqu'à 200,50
        ctx.lineTo(centerX - size / 2, centerY + size / 2); // Puis on trace jusqu'à 50,200
        ctx.lineWidth = 7;
        ctx.strokeStyle = '#3FA7D6';
        ctx.lineCap = 'round';
        ctx.stroke();

    }
    function drawCircle(centerX, centerY, size) {
        ctx.beginPath();
        ctx.lineWidth = "7";
        ctx.strokeStyle ="#EE6352"
        ctx.arc(centerX, centerY, size / 2, 0, 2 * Math.PI);
        ctx.stroke();
    }
    function drawRect(originX, originY, width, height, fillColor) {
        ctx.beginPath();
        ctx.strokeStyle = "#FFFFFF";
        ctx.lineWidth = "1";
        ctx.rect(originX, originY, width, height);
        ctx.stroke();

    }

    function drawLimit(canvas, nombreLigne, nombreColonne) {
        //Récuperer taille du canvas
        canvasWidth = canvas.width;
        canvasHeight = canvas.height;
        //Récuperer taille des cases
        caseWidth = canvasWidth / nombreColonne;
        caseHeight = canvasHeight / nombreLigne;
        console.log(caseWidth)
        console.log(caseHeight)
        //Chaque ligne
        pair = true;
        for (i_line = 0; i_line < nombreLigne; i_line++) {
            //Chaque case
            console.log(`line ${i_line}`)
            for (i_case = 0; i_case < nombreColonne; i_case++) {
                if (pair) {
                    drawRect(caseWidth * i_case, caseWidth * i_line, caseWidth, caseHeight, '#F9FAFC');
                    pair = false;
                }
                else {
                    drawRect(caseWidth * i_case, caseWidth * i_line, caseWidth, caseHeight, '#F4F9FF');
                    pair = true;
                }

            }
        }

    }
    //Case {0:0}
    drawX(50, 50, 80);
    //Case {1:0}
    drawCircle(50, 50, 80);


    drawLimit(canvas, 5, 5);

    //drawRect(50, 50, 102, 102, 'blue');


    //Ecouteurs d'évenements
    function nouvellePartie() {
        //Vérification noms des joueurs
        if (nomJoueur1.value !== null) {
            console.log('joueur 1 pas null')
        }
        else {
            console.log('joueur 1 null')
        }
    }

</script>

</html>